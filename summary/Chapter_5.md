# Chapter 5. 개발에 도커 사용하기
## “Hello World!” 말하기
- **바인드 마운트(bind mount)**
  : `docker run`명령어에 `-v HOST_DIR:CONTAINER_DIR` 인수를 사용해서 특정 호스트 디렉터리를 볼륨으로 사용하는 것.
```
docker run -d -p 5000:5000 -v "$(pwd)"/app:/app identidock
```
	- `-v $(pwd)/app:/app`: app 디렉터리를 컨테이너 내부의 /app 디렉터리에 마운트 -> 호스트에서 컨테이너 내부 /app 디렉터리의 내용들을 덮어 쓸 수 있고, 동시에 컨테이너 내부에서도 해당 디렉터리에 쓰기 작업이 가능하다(이를 원하지 않는 경우 읽기 전용으로 볼륨을 마운트시킬 수 있다.)
		- `-v`에 대한 인수는 절대 경로여야 한다.
### 항상 사용자를 설정하자
: 모든 Dockerfile에 USER 진술을 통해 사용자를 설정하는 것(또는 ENTRYPOINT나 CMD 스크립트를 이용하여 사용자를 변경하는 것)은 매우 중요하다. 만약 이를 적용하지않을 경우, 프로세스들은 컨테이너 내에서 root로 실행될 것이다. 컨테이너나 호스트의 UID가 같기 때문에, 공격자가 컨테이너를 해킹하는데 성공한다면 결국 호스트 머신의 root 접근 권한까지도 얻게 된다.

## 컴포즈로 자동화하기
: 도커 컴포즈는 빠르게 도커 개발 환경을 올려 사용할 수 있도록 만들어진 도구이다. 이는 YAML 파일들을 이용해서 여러 컨테이너들의 설정을 저장하여 반복적인 작업들이나 쉽게 에러가 발생할 수 있는 타이핑 작업, 또는 롤링 작업을 처리해준다.
### 컴포즈 워크플로
	- up: 컴포즈 파일에 정의된 모든 컨테이너들을 실행하고 로그 결과를 취합.
	컴포즈를 백그라운드에서 실행하고자 하는 경우 `-d` 인수를 사용.
	- build : 도커파일에 의해 만들어진 이미지들을 리빌드. `up`명령어는 이미지가 존재하지 않는 경우 이를 빌드하지 않기 때문에, 이미지를 업데이트해야 하는 경우 이 명령어를 이용해야 한다.
	- ps: 컴포즈에 의해 관리되는 컨테이너들의 상태를 표시.
	- run: one-off 명령을 실행하여 컨테이너를 실행시킨다. 이 명령어는 
	`—no-deps` 인수가 주어진 경우를 제외한 모든 연결된 컨테이너들을 실행.
	- logs: 컴포즈가 관리하는 컨테이너들에 대한 로그를 취합하여 제공.
	- stop: 컨테이너를 중기시킨다. 삭제하지는 않는다.
	- rm: 중지된 컨테이너들을 삭제
	이때 `-v` 인수를 사용하여 도커에서 관리하는 볼륨들을 삭제하는 것을 잊지 말자.
